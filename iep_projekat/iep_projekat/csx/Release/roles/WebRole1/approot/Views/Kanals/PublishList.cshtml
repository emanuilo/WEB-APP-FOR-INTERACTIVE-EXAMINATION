@model IEnumerable<WebRole1.Models.Pitanje>

@{
    ViewBag.Title = "PublishList";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Publish questions</h2>
<h4>Channel name: <b>@ViewBag.ChannelName</b> </h4>
@Html.ActionLink("See published questions", "PublishedQuestions", new { idKan = ViewBag.ChannelId })
<br /> <br />
<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.IdPit)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Naslov)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.VrPravljenja)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.VrPoslZaklj)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Zakljucano)
        </th>
        <th id="boxes"></th>
    </tr>
    @{ int cnt = 0;}
    @foreach (var item in Model)
    {
        
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.IdPit)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Naslov)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.VrPravljenja)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.VrPoslZaklj)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Zakljucano)
            </td>
            <td>
                @using (Html.BeginForm())
                {
                    @Html.AntiForgeryToken()

                    <input id="IdPit" name="IdPit" type="hidden" value=@item.IdPit />
                    <div class="form-actions no-color">
                        <input id="dugme @cnt" type="submit" value="Publish" class="btn btn-default" /> 
                    </div>
                }
            </td>
        </tr>
        cnt++;
    }

</table>
<input id="IdKan" name="IdKan" type="hidden" value=@ViewBag.ChannelId />
<input id="IdKor" name="IdKor" type="hidden" value=@ViewBag.UserId />




@section scripts {
    <!--Script references. -->
    <!--The jQuery library is required and is referenced by default in _Layout.cshtml. -->
    <!--Reference the SignalR library. -->
    <script src="~/Scripts/jquery.signalR-2.2.2.min.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="~/signalr/hubs"></script>
    <!--SignalR script to update the chat page and send messages.-->
    <script>
        $(function () {
            // Reference the auto-generated proxy for the hub.
            var push = $.connection.pushHub;
            // Create a function that the hub can call back to display messages.
            $.connection.hub.start().done(function () {
                $('[id^="dugme"').click(function () {
                    // Call the Send method on the hub.
                    //setTimeout(function () {
                    //    push.server.send($('#IdKan').val());
                    //}, 200);
                    //push.server.send($('#IdKan').val());

                });
            });


        });

        function htmlEncode(value) {
            var encodedValue = $('<div />').text(value).html();
            return encodedValue;
        }
    </script>
}